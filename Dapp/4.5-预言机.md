
# 预言机是什么？
区块链预言机充当着区块链与外部世界之间的桥梁，让智能合约能够获取到链下数据。

预言机是一种第三方服务工具，用于获取、验证外部信息并将其传输到运行在区块链上的智能合约中。它们通过提供一个与链下数据交互的机制，以执行有价值的任务和服务，从而扩展智能合约的功能。

如果没有预言机，智能合约就会被局限在链上数据的世界中，而无法获取到外部信息。总得来说预言机充当了外部世界和智能合约世界之间的桥梁。

# 预言机种类
预言机主要由两大种类，去中心化预言机和中心化预言机。

## 去中心化预言机
去中心化的预言机与公共区块链有着相同的目标——避免交易对手风险。
它们提高了提供给智能合约的信息的可靠性，而不依赖单一的真实来源。智能合约查询多个预言机以确定数据的有效性和准确性——这就是为什么去中心化预言机也可以称为共识预言机。例如ChainLink。

### 特点
* 高正确性保障
去中心化预言机尝试使用不同的方法实现数据的正确性。 其中包括使用证明来证明返回信息的真实性和完整性，以及要求多个实体就链下数据的有效性集体达成一致。

* 真实性证明
真实性证明是一种加密机制，支持对从外部来源检索的信息进行独立验证。 这些证明可以验证信息的来源，并在检索后发现对数据可能进行的更改。
* 基于共识的信息验证
为智能合约提供数据时，中心化预言机依靠单一真实性来源，因此有可能发布不准确的信息。 去中心化预言机依靠多个预言机节点查询链下信息，解决了这个问题。 通过对多个来源的数据进行比较，去中心化预言机降低了将无效信息传递到链上合约的风险。
* 可用性
去中心化预言机服务确保链下数据对智能合约的高可用性。 高可用性是通过对链下信息来源和负责将信息传输到链上的节点同时去中心化实现的。

## 中心化预言机
中心化预言机由一个实体控制，是智能合约信息的唯一提供者。使用单一信息来源可能存在风险——合约的有效性完全取决于控制预言机的实体。来自不良行为者的任何恶意干扰都会直接影响智能合约。中心化预言机的主要问题是存在故障点，这使得合约对漏洞和攻击的弹性降低。

### 特点
* 低正确性保障
使用中心化预言机时，无法确认提供的信息是否正确。 预言机提供者可能“信誉良好”，但这并不能排除有人行为不端或黑客篡改系统的可能性。 如果预言机被破坏，智能合约将基于错误数据执行。

* 可用性差
中心化预言机无法保证始终向其他智能合约提供链下数据。 如果提供者决定关闭服务或者黑客劫持了预言机的链下组件，智能合约则会面临拒绝服务 (Dos) 攻击的风险。
* 激励兼容性差
中心化预言机的激励往往设计不善或根本没有激励，鼓励数据提供者发送准确/未更改的信息。 为预言机的服务付费可能会鼓励诚实的行为，但这可能还不够。 由于智能合约控制着巨额价值，操纵预言机数据的收益是前所未有的。

# 预言集在智能合约中的应用

## 生成可验证的随机性
某些区块链应用程序（如基于区块链的游戏或彩票方案），需要高度的不可预测性和随机性才能有效工作。 然而，区块链的确定性执行消除了任何随机性来源。

比如 Chainlink VRF(opens in a new tab)（可验证随机函数），它是一个可证明公平且防篡改的随机数生成器 (RNG)，用于为依靠不可预测结果的应用程序构建可靠的智能合约。

## 智能合约自动化
一些去中心化预言机网络提供自动化服务，允许链下预言机节点根据用户定义的参数触发智能合约函数。 通常，这需要向预言机服务“注册”目标合约，提供资金支付预言机运营商，并指定触发合约的条件或时间。
比如Chainlink 的 Keeper 网络(opens in a new tab)，它为智能合约提供一些选项，以信任最小化和去中心化的方式将定期维护任务外包。

## 喂价数据预言机

* 衍生品协议
必须为交易者提供准确的资产价格，并在头寸抵押不足时及时进行清算。

* DEX 聚合器
流动性来自各种去中心化交易所，这意味着需要准确的预言机价格数据来确定最佳价格并以最小的滑点执行交易。

* 稳定币
加密货币抵押的稳定币需要预言机数据来确保头寸得到足额的抵押，并确保其保持与相关资产的锚定。

* 借贷协议
这些协议通常依赖于动态借贷利率进行运作，动态借贷利率是一个关于当前资产价格的函数。延迟或不准确的价格数据会损害协议的整体流动性健康，尤其是在价格波动期间。


