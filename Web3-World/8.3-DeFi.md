# DeFi 实操

## 借贷协议
我们先来尝试一下 DeFi 当中的借贷协议，其业务逻辑是我们将一些代币作为抵押品（一般是市场接受度好的，暂时不希望卖出变现的优质代币，如 WBTC），借出一定量的其它代币（如稳定币 USDC）。

打开 [app.aave.com](https://app.aave.com/) ，检查一下我们是否处于 Ethereum Sepolia 测试模式。

![Sepolia 测试网的 AAVE](images/AAVE1.png)

如果成功，那么左侧会显示我们已经领取的测试币，如 WBTC、USDC 等等，右侧则列出了可借出的资产。

### 存款

1. 点击 WBTC 后面的 Supply ，准备存入 WBTC。输入要存入的数量，如 1 个 WBTC。可以看到首次使用，Approve 的按钮会亮起，表示我们需要授权借贷协议使用我们的 WBTC。

![Supply WBTC](images/AAVE2.png)

2. 授权 Approve 操作，一般需要发送一笔链上交易的。不过新的 ERC20 代币增加链下签名 Permit 授权的新特性（这种授权操作将不会产生 Gas 费，但一定要注意检查授权的内容）

![Permit](images/AAVE3.png)

- Owner：代币所有者，你的钱包地址
- Spender：使用者，这里应为借贷合约的地址
- Value：数量，因为 WBTC 的 Decimal 为 8（精确到小数点后 8 位），因此是 1 后面 8 个 0
- Nouce：（签名的编号，从 0 开始）
- Deadline：十位数字表示的时间戳，此处即 2023-10-25 18:16:06 ，即授权有效期 1 小时

3. 授权成功后，点击 Supply 正式存入 WBTC

![Supply](images/AAVE4.png)

4. 存款成功后，左侧列表的上方会显示出你的存款

![存款](images/AAVE5.png)

- Collateral：是否作为抵押品的开关，默认开启
- Supply：存入更多该代币
- Withdraw：取出该代币

### 贷款

在存入了一定存款并开启抵押按钮之后，意味着你可以借出一定数量资金，下面我们开始尝试借出一些 USDC。

1. 查看右侧，我们可以看到在目前的抵押品状况之下，我们最多可借出 41580 枚 USDC，点击 Borrow 开始借贷。

![Borrow](images/AAVE6.png)

2. 输入一定金额的 USDC，点击 Borrow 即可开始借贷。

![Borrow](images/AAVE7.png)

- 可以看到我们的健康因子从无穷大变为了 3.75 ，当健康因子低于 1 时你的抵押品将会被部分或全部清算。特别是当你的抵押品和借出的代币是波动较大的代币时，一定要留好足够的安全边际。

[点击此处 了解更多贷款的细节](https://metatraining.buidlerdao.xyz/4-4-13e2d3c470d341369d2ae5d17a079eb9)

[点击此处 了解更多关于借贷协议和清算的知识](https://metatraining.buidlerdao.xyz/4-4-13e2d3c470d341369d2ae5d17a079eb9)

欢迎大家自由探索，尝试还清贷款，取回抵押品等更多活动。

## Swap 交易

